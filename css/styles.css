/* Base */
:root {
	--bg: #ffffff;
	--panel: #f8fafc;
	--panel-2: #ffffff;
	--muted: #6b7280;
	--text: #0f172a;
	--primary: #f3f4f6;
	--primary-2: #eef2f7;
	--accent: #0f62fe;
	--accent-2: #1b6cff;
	--border: #e5e7eb;
	--border-soft: #eef2f7;
	--success: #16a34a;
	--danger: #ef4444;
	--radius: 12px;
	--shadow: 0 1px 0 rgba(0,0,0,0.03) inset, 0 10px 30px rgba(0,0,0,0.06);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
	margin: 0;
	font-family: 'Cairo', Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
	background: var(--bg);
	color: var(--text);
}

.app {
	display: grid;
	grid-template-columns: 260px 1fr 320px;
	height: 100vh;
	gap: 0;
}

/* Sidebar */
.sidebar {
	background: var(--panel);
	border-inline-end: 1px solid var(--border);
	padding: 18px 12px;
	display: flex;
	flex-direction: column;
	gap: 16px;
	grid-row: 1;
}
.brand-title { font-weight: 700; }
.brand-sub { color: var(--muted); font-size: 12px; }

.menu { display: flex; flex-direction: column; gap: 6px; margin-top: 8px; }
.menu-item {
	text-decoration: none;
	color: var(--text);
	padding: 10px 12px;
	border-radius: 10px;
	background: transparent;
	display: flex; align-items: center; gap: 8px;
	border: 1px solid transparent;
}
.menu-item:hover { background: var(--primary); border-color: var(--border); }
.menu-item.active { background: var(--primary-2); border-color: var(--border); }

/* Field Types */
.field-types {
	background: var(--panel-2);
	border-inline-start: 1px solid var(--border);
	padding: 18px;
	overflow: auto;
	grid-column: 3;
	grid-row: 1;
}
.section-title { margin: 6px 0 12px; font-size: 14px; color: var(--muted); }
.field-list { display: grid; gap: 12px; }

.field-card {
	background: #ffffff;
	border: 1px solid var(--border);
	border-radius: var(--radius);
	padding: 14px;
	box-shadow: var(--shadow);
	cursor: grab;
	user-select: none;
	transition: transform .1s ease, background .2s ease, border-color .2s ease;
}
.field-card:active { cursor: grabbing; }
.field-card:hover { border-color: #cfd8e3; background: #fbfdff; }
.field-card-title { display: flex; align-items: center; justify-content: space-between; gap: 8px; font-weight: 600; }
.field-card-sub { color: var(--muted); font-size: 12px; margin-top: 4px; }
.field-add { background: #f8fafc; color: #0f172a; border: 1px solid var(--border); width: 26px; height: 26px; border-radius: 8px; display: grid; place-items: center; }

/* Builder */
.builder { padding: 22px; overflow: auto; grid-column: 2; grid-row: 1; }
.survey-header { background: var(--panel-2); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; }
.survey-type-selector { display: flex; gap: 12px; margin-bottom: 16px; }
.type-option { flex: 1; }
.type-option input[type="radio"] { display: none; }
.type-card { display: block; border: 2px solid var(--border); border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: all 0.2s; }
.type-option input[type="radio"]:checked + .type-card { border-color: var(--accent); background: rgba(15,98,254,0.05); }
.type-icon { font-size: 24px; margin-bottom: 8px; }
.type-title { font-weight: 600; margin-bottom: 4px; }
.type-desc { font-size: 12px; color: var(--muted); }
.survey-title, .survey-desc { width: 100%; background: #ffffff; border: 1px solid var(--border); color: var(--text); padding: 10px 12px; border-radius: 10px; }
.survey-title { font-size: 18px; font-weight: 700; }
.survey-desc { font-size: 14px; margin-top: 8px; color: #cbd5e1; }
/* Survey Statistics in Sidebar */
.survey-stats-sidebar { margin-top: 24px; }
.survey-stats-sidebar .section-title { margin-bottom: 12px; }
.stats-cards { display: flex; flex-direction: column; gap: 8px; }
.stat-card {
	background: #ffffff;
	border: 1px solid var(--border);
	border-radius: 10px;
	padding: 12px;
	display: flex;
	align-items: center;
	gap: 10px;
	box-shadow: 0 2px 4px rgba(0,0,0,0.04);
	transition: all 0.2s ease;
}
.stat-card:hover {
	border-color: var(--accent);
	box-shadow: 0 4px 12px rgba(15,98,254,0.1);
}
.stat-icon {
	font-size: 20px;
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(15,98,254,0.1);
	border-radius: 8px;
}
.stat-info { flex: 1; }
.stat-value {
	font-size: 18px;
	font-weight: 700;
	color: var(--accent);
	line-height: 1;
}
.stat-label {
	font-size: 11px;
	color: var(--muted);
	font-weight: 500;
	margin-top: 2px;
}

.dropzone {
	margin-top: 18px;
	min-height: 360px;
	background: repeating-linear-gradient(135deg, rgba(15,98,254,0.03) 0 16px, rgba(27,108,255,0.02) 16px 32px);
	border: 2px dashed #cfd8e3;
	border-radius: var(--radius);
	display: flex; align-items: center; justify-content: center;
	position: relative;
}
.dropzone.dragover { border-color: var(--accent); background: rgba(27,108,255,0.06); }

.empty-state { text-align: center; padding: 36px; color: var(--muted); }
.empty-title { font-weight: 700; color: var(--text); margin-bottom: 8px; }
.btn { border: 1px solid var(--border); background: var(--primary); color: var(--text); padding: 10px 14px; border-radius: 10px; cursor: pointer; }
.btn.primary { background: var(--accent); border-color: var(--accent-2); color: #ffffff; }

/* Force blue buttons to have white text */
button[style*="background: var(--accent)"],
button[style*="background:#0f62fe"],
button[style*="background: #0f62fe"],
button.bg-blue,
.btn.bg-blue { color: #ffffff !important; }

/* Question blocks */
.questions { width: 100%; display: grid; gap: 16px; padding: 18px; }

.q-card {
	background: #ffffff;
	border: 1px solid var(--border);
	border-radius: 12px;
	box-shadow: var(--shadow);
	padding: 18px;
}
.q-header { display: grid; grid-template-columns: 28px 1fr auto; align-items: center; gap: 12px; }
.title-container { flex: 1; }
.q-title-display { font-weight: 700; font-size: 18px; cursor: pointer; padding: 4px; border-radius: 4px; min-height: 24px; }
.q-title-display:hover { background: rgba(15,98,254,0.05); }
.q-title-display.editing { border: 1px solid var(--accent); background: rgba(15,98,254,0.05); outline: none; }
.text-toolbar { display: flex; gap: 4px; margin-top: 4px; }
.text-toolbar button { padding: 4px 8px; border: 1px solid var(--border); background: #fff; border-radius: 4px; cursor: pointer; font-size: 12px; }
.text-toolbar button:hover { background: var(--primary); }
.q-actions { display: flex; gap: 8px; justify-self: end; }
.q-handle { cursor: grab; color: #94a3b8; display: grid; place-items: center; }
.icon-btn { background: #f8fafc; color: #0f172a; border: 1px solid var(--border); width: 28px; height: 28px; border-radius: 8px; display: grid; place-items: center; cursor: pointer; }
.q-body { margin-top: 14px; }
.q-body input[type="text"], .q-body textarea, .q-body select { width: 100%; background: #ffffff; border: 1px solid var(--border); color: var(--text); padding: 10px 12px; border-radius: 10px; }
.q-body textarea { min-height: 80px; }

.option { display: flex; align-items: center; gap: 8px; margin: 6px 0; }
.option input[type="text"] { flex: 1; }
.add-option { margin-top: 6px; }

.placeholder { height: 64px; border: 2px dashed var(--accent); border-radius: 10px; }
/* Floating actions: flow with content, not sticky */
.floating-actions { display: flex; justify-content: flex-end; gap: 10px; padding: 16px 0; margin-top: 16px; }
.floating-actions .btn { box-shadow: 0 8px 24px rgba(0,0,0,0.08); }

/* Settings Modal */
.settings-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.settings-content { background: #fff; border-radius: 12px; padding: 24px; max-width: 400px; width: 90%; box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
.settings-content h3 { margin: 0 0 16px; }
.setting-item { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
.setting-item label { display: flex; align-items: center; gap: 8px; }
.setting-item input[type="number"] { width: 80px; padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; }

/* Required toggle */
.q-footer { display: flex; align-items: center; gap: 10px; margin-top: 12px; }
.toggle { position: relative; width: 42px; height: 24px; background: #e5e7eb; border-radius: 999px; border: 1px solid var(--border); cursor: pointer; transition: background .2s; }
.toggle::after { content: ""; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #ffffff; border-radius: 50%; transition: left .2s; box-shadow: 0 1px 2px rgba(0,0,0,.12); }
.toggle.on { background: #16a34a33; border-color: #16a34a; }
.toggle.on::after { left: 20px; }

/* RTL tweaks */
[dir="rtl"] .brand-sub { text-align: start; }

/* Responsiveness */
@media (max-width: 1100px) {
	.app { grid-template-columns: 220px 1fr; }
	.field-types { display: none; }
}
